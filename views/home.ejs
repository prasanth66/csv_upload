<html>
    <head>
       <title>upload-csv</title>
       <script src="https://kit.fontawesome.com/f542ede2ff.js" crossorigin="anonymous"></script>
       
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1">
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
       
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

       <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
       <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js" defer></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
       <link rel="stylesheet" href="/css/home.css">
      

    </head>
    <body>
        <div id="container">
            
            <div id="uplod_container">
              <form action="/uploadCsv" method="post" enctype="multipart/form-data">
                <div style="background-color: lemonchiffon;">
                  <input type="file" name="file" accept=".csv" id="files">
               <input type="submit" onclick="myFunction()" value="Upload File" tabindex="1" id="btn">

                </div>
               
              
               <% for(let i =0 ; i<uploads.length ; i++) {%>
              <div id="fileList_container">
               
                  <a href="/uploadCsv/<%- uploads[i]._id%>"><p style="margin-top: 2px;"><%- uploads[i].title%></p></a>
                 
            
            </div>
            <% } %>
          
          </div>
              </form>
            
            <div id="table_container"> 
             
              <% if(locals.data!=undefined){%>
               
              

                 <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                  <thead>
                    <tr >
                      <th>Id</th>
                      <th>Name</th>
                      <th>Manufacture Year</th>
                      <th>Make</th>
                      <th> Price</th>
                    </tr>
                  </thead>
                 
                 <tbody>
                 
                  <% for(let i =0 ; i<data.id.length ; i++) {%>
                    
                    <tr>
                      <td><%-data.id[i]%></td>
                      <td><%-data.name[i]%></td>
                      <td><%-data.manufacture_year[i]%></td>
                      <td><%-data.make[i]%></td>
                      <td><%-data.price[i]%></td>
                    </tr>
                    

                    <% } %>
                 </tbody>
                  

                 </table>
                <% } %>
          
            </div>
            
        </div>





        <script type='text/javascript'>



// Basic example
$(document).ready(function () {
  $('#dtBasicExample').DataTable({
    "pagingType": "simple_numbers" // "simple" option for 'Previous' and 'Next' buttons only
  });
  $('.dataTables_length').addClass('bs-select');
});


       

function myFunction(event) {
  if( document.getElementById("files").files.length == 0 ){
   
    alert("no files selected");
   
   
}

}



          (function()
          {
            if( window.localStorage )
            {
              if( !localStorage.getItem('firstLoad') )
              {
                localStorage['firstLoad'] = true;
                window.location.reload();
              }  
              else
                localStorage.removeItem('firstLoad');
            }
          })();
   
          
          </script>
    </body>
</html>